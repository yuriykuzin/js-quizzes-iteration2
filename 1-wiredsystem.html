<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>

  <script>
    "use strict"
    
    var wiredSystem = {
      type: "lamp",
      input1: {
        type: "gate-A",
        input1: {
          type: "gate-X",
          input1: {
            type: "gate-O",
            input1: {
              type: "switch",
              value: 1
            },
            input2: {
              type: "switch",
              value: 0
            }
          },
          input2: {
            type: "gate-A",
            input1: {
              type: "switch",
              value: 1
            },
            input2: {
              type: "gate-N",
              input1: {
                type: "gate-N",
                input1: {
                  type: "gate-N",
                  input1: {
                    type: "gate-N",
                    input1: {
                      type: "switch",
                      value: 1
                    }
                  }
                }
              }
           }
          }
        },
        input2: {
          type: "gate-N",
          input1: {
            type: "switch",
            value: 0
          }
        }
      }
    }
    
    function getResponse(wiredElement) {

      if (wiredElement.type == "lamp") 
        return getResponse(wiredElement.input1);
               
      if (wiredElement.type == "switch") 
        return wiredElement.value;
      
      if (wiredElement.type == "gate-N") 
        return ~getResponse(wiredElement.input1);
      
      var a = getResponse(wiredElement.input1);
      var b = getResponse(wiredElement.input2);
      
      switch (wiredElement.type) {
        case "gate-A": return (a & b);
        case "gate-O": return (a | b);
        case "gate-X": return (a ^ b);        
      }           
    }
    
    document.write("The answer is: " + getResponse(wiredSystem));

  </script>

</body>

</html>